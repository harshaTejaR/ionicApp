<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-title>Forgot Password</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content [fullscreen]="true">
  <div class="container">
    <ion-card>
      <ion-card-header>
        <ion-card-title>Reset Your Password</ion-card-title>
      </ion-card-header>
      <ion-card-content>
        <p>Enter your email address and we'll help you reset your password.</p>
        
        <ion-item>
          <ion-label position="stacked">Email Address</ion-label>
          <ion-input 
            type="email" 
            [(ngModel)]="email" 
            placeholder="Enter your email"
            [disabled]="isLoading"
          ></ion-input>
        </ion-item>
        
        <div class="button-container">
          <ion-button 
            expand="block" 
            (click)="requestReset()" 
            [disabled]="isLoading"
            color="primary"
          >
            <ion-spinner *ngIf="isLoading" name="crescent"></ion-spinner>
            <span *ngIf="!isLoading">Send Reset Token</span>
          </ion-button>
        </div>
        
        <div *ngIf="error" class="error-message">
          <ion-text color="danger">{{ error }}</ion-text>
        </div>
        
        <div *ngIf="message" class="success-message">
          <ion-text color="success">{{ message }}</ion-text>
        </div>
        
        <!-- Demo: Show reset token (in real app, this would be emailed) -->
        <div *ngIf="showTokenDisplay" class="token-display">
          <ion-card>
            <ion-card-header>
              <ion-card-title>Reset Token</ion-card-title>
            </ion-card-header>
            <ion-card-content>
              <p><strong>Token:</strong> {{ resetToken }}</p>
              <p><small>Copy this token and use it on the reset password page.</small></p>
              <ion-button 
                expand="block" 
                (click)="goToResetPassword()" 
                color="secondary"
              >
                Go to Reset Password
              </ion-button>
            </ion-card-content>
          </ion-card>
        </div>
        
        <div class="login-link">
          <ion-button 
            fill="clear" 
            (click)="goToLogin()"
            color="medium"
          >
            Back to Login
          </ion-button>
        </div>
      </ion-card-content>
    </ion-card>
  </div>
</ion-content>
